{% extends 'base.html' %}

{% block content %}
<div class="container">
    {% for message in get_flashed_messages(category_filter=["error"]) %}
    <div class="alert alert-warning" role="alert">
        {{ message }}
    </div>
    {% endfor %}
    
    <h2>Ноды</h2>
    <table>
        <thead>
            <tr>
                <th>Название</th>
                <th>IP Адрес</th>
                <th>Местоположение</th>
                <th>Статус</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for node in nodes %}
            <tr>
                <td>{{ node.name }}</td>
                <td>{{ node.ip_address }}</td>
                <td>{{ node.location }}</td>
                <td>{{ 'Включен' if node.status else 'Выключен' }}</td>
                <td>
                    <form action="{{ url_for('edit_node', node_id=node.id) }}" method="get">
                        <button type="submit">Редактировать</button>
                    </form>
                    <form action="{{ url_for('delete_node', node_id=node.id) }}" method="post" onsubmit="return confirm('Вы уверены, что хотите удалить этот нод?');">
                        <button type="submit">Удалить</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<form action="{{ url_for('new_node') }}" method="get">
    <button type="submit" class="btn btn-secondary">Добавить новый нод</button>
</form>

<form action="{{ url_for('super_admin_page') }}" method="get">
    <button type="submit" class="btn btn-secondary">Назад</button>
</form>
{% endblock %}
