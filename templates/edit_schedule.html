{% extends 'base.html' %}

{% block content %}
<h2>{{ "Редактировать" if schedule.id else "Создать новое" }} расписание</h2>
<form method="post">
    <div>
        <label for="name">Название:</label>
        <input type="text" id="name" name="name" value="{{ schedule.name if schedule else '' }}" required>
    </div>
    <div>
        <label for="description">Описание:</label>
        <textarea id="description" name="description" required>{{ schedule.description if schedule else '' }}</textarea>
    </div>
    <div>
        <label for="type">Тип расписания:</label>
        <select id="scheduleType" name="type">
            <option value="повседневное" {{ "selected" if schedule and schedule.type == "повседневное" }}>Повседневное</option>
            <option value="исключение" {{ "selected" if schedule and schedule.type == "исключение" }}>Исключение</option>
            <option value="специальная дата" {{ "selected" if schedule and schedule.type == "специальная дата" }}>Специальная дата</option>
        </select>
    </div>

    <div id="dateTimeField" style="display:none;">
      <label for="datetime">Дата и время:</label>
      <input type="datetime-local" id="datetime" name="datetime" step="60">
    </div>
    
    <button type="submit">Сохранить</button>
</form>

<script>
document.getElementById("scheduleType").addEventListener("change", function() {
  var value = this.value;
  if(value == "специальная дата") {
    document.getElementById("dateTimeField").style.display = "block";
  } else {
    document.getElementById("dateTimeField").style.display = "none";
  }
});
</script>
{% endblock %}
